<h2>Working with filters</h2>
<section>
	<h3>Table of contents</h3>
	<ul class="agenda">
		<li><a href="filters#common-idea">Общая идея</a></li>
		<li><a href="filters#bootstrap">Как подключить</a></li>
		<li><a href="filters#filter-annotation">Аннотация <code>@filter</code></a></li>
		<li>
			<a href="filters#filter-registration">Регистрация объекта как filter target</a>
			<ul>
				<li>
					<a href="filters#constructor-injection">Injection of <code>FiltersService</code> via constructor</a>
				</li>
				<li>
					<a href="filters#register-as-filter"><code>rtRegisterAsFilter</code> directive</a>
				</li>
				<li>
					<a href="filters#list-init"><code>onListInit</code> list event</a>
				</li>
			</ul>
		</li>
	</ul>
</section>
<section id="common-idea">
	<h3>Общая идея</h3>
	<p>
		Каждый список обращается на сервер за данными, для получения которых списку необходимо строить запрос. Если вы посмотрели
		наш <a href="#" [routerLink]="['/quick-tour']">quick tour</a>, то вы знаете, что наши списки так же умеют сбрасывать
		состояние параметров в значения по-умолчанию.
	</p>
	<p>
		Так же, возможно, вы уже видели, что наши списки можно настроить, чтобы они <a href="#" [routerLink]="['/persistence']">сохраняли свое состояние</a>,
		например, в
		<code>queryString</code>. Если полученную ссылку отправить кому-нибудь, то, открыв ее, он получит список с теми же значениями
		параметров сортировки и paging, что и у отправителя.
	</p>
	<p>
		Весь этот функционал достаточно легко было реализовать в библиотеке <code>right-angled</code> для списка самого по себе.
		Но как быть, если речь заходит о кастомных параметрах, например, когда нужно добавить дополнительный фильтр к списку? Как
		сделать так, чтобы он тоже отправлялся на сервер в качестве параметра, сбрасывался в значение по умолчанию, сохранялся,
		восстанавливал свое значение при открытии страницы? </p>
	<p>
		И желательно делать это с минимумом кода. Поскольку помнить, что фильтр необходимо добавить в параметры запроса это легко
		- мы его для этого и создаем. А вот про остальной функционал забыть в рабочей спешке очень легко. И обратить внимание на
		то, что наш фильтр, к примеру, не сбрасывается методом <code>resetSettings</code> мы можем долгое время спустя. Когда
		приложение уже попало к конечным пользователям.
	</p>
	<p>
		Для решения этой проблемы в <code>right-angled</code> реализованы аннотация <code>@filter</code> и сервис <code>FiltersService</code>.
	</p>
	<p>
		Идея достаточно проста. Мы помечаем свойства нашего компонента, представляющие собой фильтры, аннотацией <code>@filter</code>.
		При необходимости мы можем указать аннотации дополнительные параметры, но о них ниже. Вторым щагом мы регистрируем раработанный
		компонент в сервисе
		<code>FiltersService</code> уже настроеном в <code>RtList</code>. После этого список будет обрабатывать параметры нашего
		компонента во всех описанных выше сценариях так же, как свои.
	</p>
	<p>
		Ниже мы привели живой пример компонента, реализующего список с фильтрами. Как вы можете заметить, свойства компонента помечены
		аннотацией <code>@filter</code> а сам компонент регистрируется в сервисе <code>FiltersService</code> в обработчике события
		<code>onListInit</code>. Теперь значения этих полей автоматически попадают в запрос на сервер, сбрасываются кнопкой "reset
		settings", сериализуются в <code>queryString</code> и восстанавливаются из <code>queryString</code> при обновлении страницы.
	</p>
	<p>
		Дополнительно, под таблицей мы отображаем при помощи <a href="https://angular.io/docs/ts/latest/api/common/index/JsonPipe-pipe.html" target="_blank">json pipe</a> параметры последнего выполненного запроса,
		чтобы вы могли оценить, в каком виде параметры отправляются на сервер.
	</p>
	<rt-demo-tab-section>
		<rt-demo-sample-tab>
			<rt-demo-filters-sample></rt-demo-filters-sample>
		</rt-demo-sample-tab>
		<rt-demo-code-tab url="%2Bfilters/filters-sample/filters-sample.component.ts">
		</rt-demo-code-tab>
		<rt-demo-code-tab url="%2Bfilters/filters-sample/filters-sample.component.html">
		</rt-demo-code-tab>
	</rt-demo-tab-section>
</section>
<section id="bootstrap">
	<h3>Как подключить</h3>
	<p>
		Сам по себе функционал фильтров подразумевает простой импорт аннотации <code>@filter</code> и пометку ей свойств вашего
		компонента. Если вы хотите использовать функционал фильтров по отдельности от списков, то вам так же необходимо импортировать
		в нужный компонент сервис <code>FiltersService</code> и указать его в коллекции <a target="_blank" href="https://angular.io/docs/ts/latest/api/core/index/Component-decorator.html">providers</a>		вашего компонента.
	</p>
	<p>
		Но, если вы планируете пользоваться описанной ниже директивой <code>rtRegisterAsFilter</code>, то необходимо будет также
		импортировать модуль <code>RTFiltersModule</code>. Или модуль <code>RtModule</code>, включающий в себя функционал всей
		библиотеки <code>right-angled</code> целиком
	</p>
	<rt-demo-tab-section>
		<rt-demo-code-tab url="%2Bfilters/bootstrap/app.module.tsfake">
		</rt-demo-code-tab>
	</rt-demo-tab-section>

</section>
<section id="filter-annotation">
	<h3>Аннотация <code>@filter</code></h3>
</section>
<section id="filter-registration">
	<h3>Регистрация объекта как filter target</h3>
	<section id="constructor-injection">
		<h4>Injection of <code>FiltersService</code> via constructor</h4>
	</section>
	<section id="register-as-filter">
		<h4><code>rtRegisterAsFilter</code> directive</h4>
	</section>
	<section id="list-init">
		<h4><code>onListInit</code> list event</h4>
	</section>
</section>